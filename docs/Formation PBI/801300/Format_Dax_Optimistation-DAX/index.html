<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Formation PBI/801300/Format_Dax_Optimistation-DAX">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<title data-rh="true">Format_Dax_Optimistation-DAX | Architecture</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/docs/Formation PBI/801300/Format_Dax_Optimistation-DAX"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Format_Dax_Optimistation-DAX | Architecture"><meta data-rh="true" name="description" content="Moteur de stockage Vertipaq"><meta data-rh="true" property="og:description" content="Moteur de stockage Vertipaq"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/docs/Formation PBI/801300/Format_Dax_Optimistation-DAX"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/docs/Formation PBI/801300/Format_Dax_Optimistation-DAX" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/docs/Formation PBI/801300/Format_Dax_Optimistation-DAX" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.7c83ac77.css">
<link rel="preload" href="/assets/js/runtime~main.a3d3d1d7.js" as="script">
<link rel="preload" href="/assets/js/main.0e780d71.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">SIA-DOC</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Architecture BI IC</a></div><div class="navbar__items navbar__items--right"><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Nomenclature Documentation IC</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Organisation du travail/mdTrucAstuce-id">Organisation du travail</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Argot,concepts et d√©finitions/composantsPBI-id">Argot,concepts et d√©finitions</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Processus/layoutDefaut-id">Processus</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Normes/Nomenclature/nomenclatureservicepbi_id">Normes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Pratiques/Couche-s√©mantique/bonnesPratiquesPBI-id">Pratiques</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Guides/AnalysearchitecturefonctionnellePBI_id">Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Config Service PBI/PBI_Adm_01_Service_PBI_Configuration">Config Service PBI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/S√©curit√©/PBI_Arch_S√©curit√©_01_Groupe AD">S√©curit√©</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/Formation PBI/Format_Structure de plan de formation Power BI">Formation PBI</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/Format_Structure de plan de formation Power BI">Format_Structure de plan de formation Power BI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/PBID-id">PBI Desktop</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/Format_Pr√©sentation-Gabarits-EODE">Format_Pr√©sentation-Gabarits-EODE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/Format_Mod√©lisaiton_Introduction-mod√©lisation-donn√©es">Format_Mod√©lisaiton_Introduction-mod√©lisation-donn√©es</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/Format_Pr√©sentation-PBI-Service">Format_Pr√©sentation-PBI-Service</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Formation PBI/801200/PowerQuery_Introduction-a-Power-Query">801200</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/Formation PBI/801300/Format_Dax_Calcul-DAX">801300</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/801300/Format_Dax_Calcul-DAX">Format_Dax_Calcul-DAX</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/801300/Format_Dax_DA-Contextes-√©valuation-avanc√©s">Format_Dax_DA-Contextes-√©valuation-avanc√©s</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/801300/Format_Dax_DA-Evaluation-contextes">Format_Dax_DA-Evaluation-contextes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/801300/Format_Dax_DA-Fonction-CALCULATE">Format_Dax_DA-Fonction-CALCULATE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/801300/Format_Dax_DA-Fonctions-de-table">Format_Dax_DA-Fonctions-de-table</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/801300/Format_Dax_DA-Introduction-Langage-DAX">Format_Dax_DA-Introduction-Langage-DAX</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/801300/Format_Dax_Dax avanc√©">Format_Dax_Dax avanc√©</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/801300/Format_Dax_Formation-Langage-DAX">Format_Dax_Formation-Langage-DAX</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Formation PBI/801300/Format_Dax_Optimistation-DAX">Format_Dax_Optimistation-DAX</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/HyperlienFormation-id">Hyperlien Formation Power  BI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/Dax Studio">Dax Studio</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/Introduction-PBI-Libre-service">Introduction-PBI-Libre-service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/Introduction-PBI-Service-Application">Introduction-PBI-Service-Application</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/Introduction-PBI-Service-Workspace">Introduction-PBI-Service-Workspace</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/Mod√©lisation-donn√©es">Mod√©lisation-donn√©es</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/Profilage-donn√©es">Profilage-donn√©es</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/">üè†</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">Formation PBI</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">801300</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">Format_Dax_Optimistation-DAX</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Optimistation De DAX</h1><h2 class="anchor anchorWithStickyNavbar_mojV" id="moteur-de-stockage-vertipaq">Moteur de stockage Vertipaq<a class="hash-link" href="#moteur-de-stockage-vertipaq" title="Direct link to heading">‚Äã</a></h2><p>Afin d&#x27;optimiser DAX, il faudra tout d&#x27;abord savoir comment le moteur interne fonctionne.
Le document va contenir les techniques de compression de Vertipaq, son processus de segmentation et comment optimiser l&#x27;utilisation de la m√©moire d&#x27;une base de donn√©es et comment utiliser l&#x27;analyseur Vertipaq pour recueillir des informations pr√©cises sur votre mod√®le .</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="base-de-donn√©es-en-colonnes-vertipaq-en-m√©moire">Base de donn√©es en colonnes VertiPaq en m√©moire<a class="hash-link" href="#base-de-donn√©es-en-colonnes-vertipaq-en-m√©moire" title="Direct link to heading">‚Äã</a></h3><p>√Ä chaque fois que le moteur SSAS (Sql server Analysis Services) re√ßoit une requ√™te DAX , la requ√™te atteint Analysis Services et s&#x27;ex√©cute via le moteur de calcul DAX.
√Ä ce stade, il existe deux options pour r√©pondre √† la requ√™te : soit le moteur Vertipaq(xmSQL) doit r√©cup√©rer les donn√©es ou bien elles seront d√©j√† stock√©es dans le moteur Vertipaq(Cached Data) , soit il utilise la technologie DIRECTQUERY(SQL) afin d&#x27;obtenir les donn√©es source.</p><p><img loading="lazy" alt="Optimistation-DAX_1" src="/assets/images/Optimistation-DAX_1-7716d5a475517f9d54b706d9d9ee15e9.png" width="1049" height="500" class="img_E7b_"></p><p>Le traitement d&#x27;une&#x27; requ√™te peut se faire soit en mode m√©moire (moteur Vertipaq) soit en mode DirectQuery, ce dernier va ex√©cuter la requ√™te sur votre code SQL de base de donn√©es serveur.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="cest-quoi-vertipaq">C&#x27;est quoi Vertipaq?<a class="hash-link" href="#cest-quoi-vertipaq" title="Direct link to heading">‚Äã</a></h3><p>Vertipaq est une base de donn√©es en colonnes en m√©moire, cela signifie fondamentalement que toutes les donn√©es doivent √™tre stocker en m√©moire(RAM), et la mani√®re de les stocker est en colonnes non ligne par ligne .</p><p>Il existe deux mani√®res de stocker les donn√©es , soit en colonnes soit en lignes:</p><p><strong>Stockage en ligne : </strong>vous avez l&#x27;acc√®s rapide juste √† une ligne par ligne de donn√©es peu importe combien de colonnes existent , alors vous d√©pensez plus de temps pendant l&#x27;entr√©e / sortie pour un processeur.</p><p><img loading="lazy" alt="Optimistation-DAX_2" src="/assets/images/Optimistation-DAX_2-64ef793a0041bf1275010f861fd4c296.png" width="986" height="452" class="img_E7b_"></p><p><strong>Stockage en colonne :</strong> vous avez acc√®s rapide √† une seule colonne √† la fois et √ßa aide √† r√©duite les entr√©es/ sorties √† un magasin de donn√©es.</p><p><img loading="lazy" alt="Optimistation-DAX_3" src="/assets/images/Optimistation-DAX_3-e6ced8957fe4965e1a30fd175edb0049.png" width="989" height="486" class="img_E7b_"></p><p>Imaginons que , il y&#x27;a une limite physique, que vous ne pouvez pas augmenter de CPU ou avoir multiple processeur , vous √™tes obliger de suivre la m√©thode de stockage en colonnes car c&#x27;est la plus optimale c√¥t√© entr√©e/sortie dans un magasin de donn√©es.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="run-length-encoding-rle">Run Length Encoding (RLE)<a class="hash-link" href="#run-length-encoding-rle" title="Direct link to heading">‚Äã</a></h3><p>Prenant l&#x27;exemple d&#x27;une colonne Trimestre qui vient d&#x27;une table de fait et qui sera utiliser dans diff√©rentes relations.
Le fait RLE va d√©tecter o√π la colonne va changer de Q1 au Q2 et il va stocker les informations en compacte non en r√©p√©tant la valeur.
Si on a le cas de la colonne PRIX la valeur change si souvent √† cause des remises , et d&#x27;autres calcul ,du coup RLE stocke la colonne original .</p><p><img loading="lazy" alt="Optimistation-DAX_4" src="/assets/images/Optimistation-DAX_4-ed250a13e59c3257e2ebaa6d91fd7461.png" width="786" height="399" class="img_E7b_"></p><p><strong>RLE</strong> travaille toujours colonne par colonne de base , et ce n&#x27;est pas le seul type d&#x27;encodage tabulaire existant , il existe aussi <strong>Dictionary encoding</strong> qui travaille par une autre m√©thode que RLE, il lit tous les valeurs distinctes et construit un dictionnaire qui contient 0,1,2,3,4... et ensuite il remplace la colonne originale par une nouvelle colonne qui contient les entr√©es du dictionnaire :</p><p><img loading="lazy" alt="Optimistation-DAX_5" src="/assets/images/Optimistation-DAX_5-cea17b420ab14a7d759a47c12760d1c6.png" width="840" height="522" class="img_E7b_"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="compression-vertipaq">Compression VertiPaq<a class="hash-link" href="#compression-vertipaq" title="Direct link to heading">‚Äã</a></h3><p>La compression dans Vertipaq provient du fait que vous stockez des donn√©es dans un magasin de colonnes √† partir du dictionnaire encodage et de RLE.</p><p>Il est si important de parler de compression de donn√©es quand on explique le moteur Vertipaq parce que c&#x27;est une base de donn√©es en m√©moire et qui dit m√©moire dit optimisation et compression des entr√©es/sorties pour balayer toutes vos donn√©es.  </p><p>Lorsque les donn√©es sont en m√©moire, le temps qui prend pour acc√©der √† une information dans un registre CPU est de 1 ns, si on la cherche en cache premier niveau est de 4 ns ainsi de suite .</p><p><img loading="lazy" alt="Optimistation-DAX_6" src="/assets/images/Optimistation-DAX_6-603955e227e990bbfbe96ec962fb5b3f.png" width="633" height="407" class="img_E7b_"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="segmentation">Segmentation<a class="hash-link" href="#segmentation" title="Direct link to heading">‚Äã</a></h3><p>Une table de grande taille qui contient 10 milliards de lignes, il faudra beaucoup de temps pour la balayer ainsi beaucoup de stockage dans la RAM qui va la rendre trop lente en temps de r√©ponse , du coup l&#x27;outil Tabular d&#x27;Analysis Services va la diviser en segments.
Chaque segment contient des milliers de lignes comme en SSAS est de 8 millions de lignes, en Power BI un segment peut aller jusqu&#x27;√† 1 million.
Tabular lit segment par segment de vos donn√©es et pour chaque segment il effectue l&#x27;encodage dictionnaire et RLE.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="utilisation-de-la-m√©moire-de-donn√©es">Utilisation de la m√©moire de donn√©es<a class="hash-link" href="#utilisation-de-la-m√©moire-de-donn√©es" title="Direct link to heading">‚Äã</a></h3><p>L&#x27;utilisation de la m√©moire de donn√©es d√©pend du nombre de colonnes et de la cardinalit√© de chaque colonne, plus la cardinalit√© est grande plus la performance est faible. Donc la cardinalit√© est le seul point o√π vous devez plus concentr√© pour optimiser votre mod√®le.</p><p>Au moment de ex√©cution d&#x27;une requ√™te vous aurez surement besoin de la m√©moire, et la quantit√© de m√©moire d√©pend de la mat√©rialisation.
<em>C&#x27;est quoi la mat√©rialisation ?</em> la mat√©rialisation est l&#x27;√©tape de la reconstruction de la structure de vos donn√©es, c&#x27;est comme le cas o√π vous reconstruit votre base de donn√©es d&#x27;une base plate au base par stockage en colonnes.</p><p>il existe deux m√©thodes de mat√©rialisation :
*. <strong>Early materialization(Mat√©rialisation pr√©coce)</strong> c&#x27;est une m√©thode fondamentale qui se fait par la reconstruction de votre originale structure √† une structure plus facile √† balayer ou √† interroger .</p><p><img loading="lazy" alt="Optimistation-DAX_7" src="/assets/images/Optimistation-DAX_7-ceac7121118bf8bf993963326cee8597.png" width="846" height="561" class="img_E7b_"></p><p>‚Äã	*. <strong>Late materialization(Mat√©rialisation tardive)</strong> c&#x27;est une m√©thode qui utilise le BITMAP ou plut√¥t l&#x27;indexation BITMAP (Un index bitmap est un type sp√©cial d&#x27;index de base de donn√©es qui utilise des bitmaps. ), donc il reconstruit pas ta structure originale, mais il index tes Ids pour faciliter le balayage des donn√©es.</p><p><img loading="lazy" alt="Optimistation-DAX_8" src="/assets/images/Optimistation-DAX_8-0091a581a1b1811793c15be2fef7bc19.png" width="864" height="571" class="img_E7b_"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="mat√©rialisation-dans-dax">Mat√©rialisation dans DAX<a class="hash-link" href="#mat√©rialisation-dans-dax" title="Direct link to heading">‚Äã</a></h3><p>Afin de comprendre ce qu&#x27;est la mat√©rialisation, regardez cette requ√™te simple :</p><div class="codeBlockContainer_I0IT language-DAX theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-DAX codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">√âVALUER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LIGNE (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;R√©sultat&quot;, COUNTROWS ( R√âSUM√â ( Ventes, Ventes[ProductKey] ) )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Le r√©sultat est le nombre distinct de cl√©s de produit dans la table ventes. vous pouvez imaginer comment VertiPaq peut ex√©cuter cette requ√™te.
√âtant donn√© que la seule colonne interrog√©e est <em>ProductKey</em> , il ne peut analyser que cette colonne, en trouvant toutes les valeurs dans la structure compress√©e de la colonne.
Lors de la num√©risation, il garde une trace des valeurs trouv√©es dans un index bitmap et, √† la fin, il n&#x27;a qu&#x27;√† compter les bits d√©finis.
Gr√¢ce au parall√©lisme au niveau des segments, cette requ√™te peut s&#x27;ex√©cuter rapidement sur de tr√®s grandes tables et la seule m√©moire qu&#x27;elle doit allouer est l&#x27;index bitmap pour compter les cl√©s.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="stockage-interne">Stockage interne<a class="hash-link" href="#stockage-interne" title="Direct link to heading">‚Äã</a></h3><p>Afin d&#x27;optimiser un mod√®le ou une colonne il faudra d&#x27;abord savoir sa taille ,et cette information vous pouvez l&#x27;avoir de diff√©rentes mani√®res.</p><p>Il existe DMV (donn√©es vues de gestion) qui est un type de requ√™te que vous ex√©cutez pour recueillir des informations sur le contenu de votre mod√®le de donn√©es .</p><p><img loading="lazy" alt="Optimistation-DAX_9" src="/assets/images/Optimistation-DAX_9-dd5c4c8a41b702fa3a181874f40e425b.png" width="803" height="501" class="img_E7b_"></p><p>Afin d&#x27;ex√©cuter des requ√™tes DMV, il faudra utiliser l&#x27;outil Vertipaq Analyzer qui se trouve sur le lien dans l&#x27;image ci-dessous, c&#x27;est un fichier Excel contenant des donn√©es Power Pivot mod√®le et qui utilise DMV pour se connecter √† une instance SSAS, rassemble les informations tr√®s d√©taill√©es sur votre mod√®le de donn√©es .</p><p><img loading="lazy" alt="Optimistation-DAX_10" src="/assets/images/Optimistation-DAX_10-e0b8df933aecc2f6e94e8174bb8665da.png" width="972" height="341" class="img_E7b_"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="les-relations">Les relations<a class="hash-link" href="#les-relations" title="Direct link to heading">‚Äã</a></h3><p>Comment le moteur traduit la relation entre Produit et table Ventes ?</p><div class="codeBlockContainer_I0IT language-DAX theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-DAX codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">CALCULATE (MIN (Sales [Date] ), Product [Color] = &quot;Red&quot; )</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Tout d&#x27;abord il scanne  la dimension Produit, apr√®s il num√©rise les lignes qui contiennent la condition pour filtrer la relation entre Produit et Ventes, et √† la fin obtenir la date Min de cl√© de produit dans la table des ventes.</p><p><img loading="lazy" alt="Optimistation-DAX_11" src="/assets/images/Optimistation-DAX_11-104ccfa2ad41fd000d47d535dc6a4880.png" width="882" height="578" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="optimisation-de-grands-mod√®les">Optimisation de grands mod√®les<a class="hash-link" href="#optimisation-de-grands-mod√®les" title="Direct link to heading">‚Äã</a></h2><p>Avec de petits mod√®les, le seul effort d&#x27;optimisation de votre code consiste √† travailler au niveau DAX. Lorsque le mod√®le devient plus grand, la consommation de m√©moire devient d&#x27;une importance primordiale et vous devez non seulement apprendre √† mesurer les performances de DAX et √† tirer le meilleur parti du moteur de stockage - vous devez √©galement apprendre quelques techniques avanc√©es pour r√©duire la m√©moire des dimensions, des relations et des colonnes pertinentes, afin d&#x27;acc√©l√©rer leur utilisation.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="sum-ou-sumx-">SUM ou SUMX ?<a class="hash-link" href="#sum-ou-sumx-" title="Direct link to heading">‚Äã</a></h3><p>Est-il pr√©f√©rable d&#x27;utiliser SUM ou SUMX?</p><p><img loading="lazy" alt="Optimistation-DAX_12" src="/assets/images/Optimistation-DAX_12-f6002adb894aa415f3e0533101f64238.png" width="447" height="279" class="img_E7b_"></p><p>Si vous naviguez sur internet vous trouverez des sites qui disent que SUMX est plus lent que SUM et pr√©f√©rable d&#x27;utiliser plus la fonction SUM().</p><p>En effet il y&#x27;a des ann√©es , mais aujourd&#x27;hui SUMX et SUM font la m√™me chose, donc si vous √©ecriverz un Sumx() vous parcourez la m√™me table o√π vous avez la colonne de Sum() .
Par contre en Sumx() vous pouvez √©crire des expressions plus complexes qui demandera plus de m√©moire et plus de temps de r√©ponse, c&#x27;est logique qu&#x27;elle prenne plus de RAM et plus de temps pour balayer les colonnes √† multiplier ou autres.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="optimisation-des-dimensions-d√©g√©n√©r√©es">Optimisation des dimensions d√©g√©n√©r√©es<a class="hash-link" href="#optimisation-des-dimensions-d√©g√©n√©r√©es" title="Direct link to heading">‚Äã</a></h3><p>Une autre optimisation que vous pouvez envisager est celle d&#x27;une dimension d√©g√©n√©r√©e, cette solution se fait habituellement dans l&#x27;entrep√¥t de donn√©es ou sch√©ma en √©toile.</p><p>Une dimension d√©g√©n√©r√©e est une dimension que l‚Äôon stocke dans la table de faits sous la forme d‚Äôun unique attribut. Il s‚Äôagit d‚Äôun attribut qui peut servir d‚Äôaxe d‚Äôanalyse sans table de dimension. Parfois, il d√©finit √©galement le grain de la table de faits.<img loading="lazy" alt="image-20220204162904953" src="/assets/images/Optimistation-DAX_13-0eeff9acbfa65ab4d31b6c4c7dede43c.png" width="535" height="459" class="img_E7b_"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="dimension-bottlenecks">Dimension bottlenecks<a class="hash-link" href="#dimension-bottlenecks" title="Direct link to heading">‚Äã</a></h3><p>Prenant le sc√©nario d&#x27;un simple mod√®le qui contient une table de produit de 1 millions de lignes et une table de fait qui contient les ventes par produit √† 10 milliards de lignes. Alors dans ce cas vous allez avoir un probl√®me si vous voulez calculer une somme du montant des ventes par couleur de produit et le temps de r√©ponse sera lent √† cause de 1 millions de lignes de la table produit. </p><p><img loading="lazy" alt="Optimistation-DAX_13" src="/assets/images/Optimistation-DAX_14-a3af412966364160faf646afdc9ab300.png" width="878" height="489" class="img_E7b_"></p><p>C&#x27;est pour cela qu&#x27;on propose de faire des tables de cat√©gories et sous-cat√©gories, pour qu&#x27;√† la place de parcourir1 million s de lignes , la table fait va parcourir que 10 000 lignes uniques (image ci-dessous).</p><p><img loading="lazy" alt="Optimistation-DAX_14" src="/assets/images/Optimistation-DAX_15-461fb6ec88feac09c023d3f3783fed89.png" width="552" height="425" class="img_E7b_"></p><p>Comme vous remarquez la relation et non-actif entre la table produit cat√©gorie et ventes par produit cat√©gorie, mais vous pouvez cr√©er du code DAX que si la requ√™te interroge uniquement le regroupement par cat√©gorie , la requ√™te DAX utilisera la relation non-actif √† la place de la relation actif .
<em>La fonction qui sert pour cette requ√™te est USERELATIONSHIP ()</em>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/80-Formation PBI/801300/801300_Format_Dax_Optimistation-DAX.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/Formation PBI/801300/Format_Dax_Formation-Langage-DAX"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Format_Dax_Formation-Langage-DAX</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/Formation PBI/HyperlienFormation-id"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Hyperlien Formation Power  BI</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#moteur-de-stockage-vertipaq" class="table-of-contents__link toc-highlight">Moteur de stockage Vertipaq</a><ul><li><a href="#base-de-donn√©es-en-colonnes-vertipaq-en-m√©moire" class="table-of-contents__link toc-highlight">Base de donn√©es en colonnes VertiPaq en m√©moire</a></li><li><a href="#cest-quoi-vertipaq" class="table-of-contents__link toc-highlight">C&#39;est quoi Vertipaq?</a></li><li><a href="#run-length-encoding-rle" class="table-of-contents__link toc-highlight">Run Length Encoding (RLE)</a></li><li><a href="#compression-vertipaq" class="table-of-contents__link toc-highlight">Compression VertiPaq</a></li><li><a href="#segmentation" class="table-of-contents__link toc-highlight">Segmentation</a></li><li><a href="#utilisation-de-la-m√©moire-de-donn√©es" class="table-of-contents__link toc-highlight">Utilisation de la m√©moire de donn√©es</a></li><li><a href="#mat√©rialisation-dans-dax" class="table-of-contents__link toc-highlight">Mat√©rialisation dans DAX</a></li><li><a href="#stockage-interne" class="table-of-contents__link toc-highlight">Stockage interne</a></li><li><a href="#les-relations" class="table-of-contents__link toc-highlight">Les relations</a></li></ul></li><li><a href="#optimisation-de-grands-mod√®les" class="table-of-contents__link toc-highlight">Optimisation de grands mod√®les</a><ul><li><a href="#sum-ou-sumx-" class="table-of-contents__link toc-highlight">SUM ou SUMX ?</a></li><li><a href="#optimisation-des-dimensions-d√©g√©n√©r√©es" class="table-of-contents__link toc-highlight">Optimisation des dimensions d√©g√©n√©r√©es</a></li><li><a href="#dimension-bottlenecks" class="table-of-contents__link toc-highlight">Dimension bottlenecks</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Lien web</div><ul class="footer__items"><li class="footer__item"><a href="https://docusaurus.io/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docusaurus doc<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a3d3d1d7.js"></script>
<script src="/assets/js/main.0e780d71.js"></script>
</body>
</html>