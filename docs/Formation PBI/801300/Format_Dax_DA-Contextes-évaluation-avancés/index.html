<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Formation PBI/801300/Format_Dax_DA-Contextes-évaluation-avancés">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<title data-rh="true">Format_Dax_DA-Contextes-évaluation-avancés | Architecture</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/docs/Formation PBI/801300/Format_Dax_DA-Contextes-évaluation-avancés"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Format_Dax_DA-Contextes-évaluation-avancés | Architecture"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/docs/Formation PBI/801300/Format_Dax_DA-Contextes-évaluation-avancés"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/docs/Formation PBI/801300/Format_Dax_DA-Contextes-évaluation-avancés" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/docs/Formation PBI/801300/Format_Dax_DA-Contextes-évaluation-avancés" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.7c83ac77.css">
<link rel="preload" href="/assets/js/runtime~main.a3d3d1d7.js" as="script">
<link rel="preload" href="/assets/js/main.0e780d71.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">SIA-DOC</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Architecture BI IC</a></div><div class="navbar__items navbar__items--right"><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Nomenclature Documentation IC</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Organisation du travail/mdTrucAstuce-id">Organisation du travail</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Argot,concepts et définitions/composantsPBI-id">Argot,concepts et définitions</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Processus/layoutDefaut-id">Processus</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Normes/Nomenclature/nomenclatureservicepbi_id">Normes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Pratiques/Couche-sémantique/bonnesPratiquesPBI-id">Pratiques</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Guides/AnalysearchitecturefonctionnellePBI_id">Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Config Service PBI/PBI_Adm_01_Service_PBI_Configuration">Config Service PBI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Sécurité/PBI_Arch_Sécurité_01_Groupe AD">Sécurité</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/Formation PBI/Format_Structure de plan de formation Power BI">Formation PBI</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/Format_Structure de plan de formation Power BI">Format_Structure de plan de formation Power BI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/PBID-id">PBI Desktop</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/Format_Présentation-Gabarits-EODE">Format_Présentation-Gabarits-EODE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/Format_Modélisaiton_Introduction-modélisation-données">Format_Modélisaiton_Introduction-modélisation-données</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/Format_Présentation-PBI-Service">Format_Présentation-PBI-Service</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Formation PBI/801200/PowerQuery_Introduction-a-Power-Query">801200</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/Formation PBI/801300/Format_Dax_Calcul-DAX">801300</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/801300/Format_Dax_Calcul-DAX">Format_Dax_Calcul-DAX</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Formation PBI/801300/Format_Dax_DA-Contextes-évaluation-avancés">Format_Dax_DA-Contextes-évaluation-avancés</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/801300/Format_Dax_DA-Evaluation-contextes">Format_Dax_DA-Evaluation-contextes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/801300/Format_Dax_DA-Fonction-CALCULATE">Format_Dax_DA-Fonction-CALCULATE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/801300/Format_Dax_DA-Fonctions-de-table">Format_Dax_DA-Fonctions-de-table</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/801300/Format_Dax_DA-Introduction-Langage-DAX">Format_Dax_DA-Introduction-Langage-DAX</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/801300/Format_Dax_Dax avancé">Format_Dax_Dax avancé</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/801300/Format_Dax_Formation-Langage-DAX">Format_Dax_Formation-Langage-DAX</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/801300/Format_Dax_Optimistation-DAX">Format_Dax_Optimistation-DAX</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/HyperlienFormation-id">Hyperlien Formation Power  BI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/Dax Studio">Dax Studio</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/Introduction-PBI-Libre-service">Introduction-PBI-Libre-service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/Introduction-PBI-Service-Application">Introduction-PBI-Service-Application</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/Introduction-PBI-Service-Workspace">Introduction-PBI-Service-Workspace</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/Modélisation-données">Modélisation-données</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Formation PBI/Profilage-données">Profilage-données</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/">🏠</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">Formation PBI</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">801300</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">Format_Dax_DA-Contextes-évaluation-avancés</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Format_Dax_DA-Contextes-évaluation-avancés</h1></header><h1>Contextes d&#x27;évaluation avancés</h1><h2 class="anchor anchorWithStickyNavbar_mojV" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">​</a></h2><p>Dans ce document, on va expliquer la différence entre les filtres et les modificateurs de la fonction CALCULATE ainsi la transaction de contexte qui se produit lorsque la fonction CALCULATE est exécutée dans un contexte de ligne.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="modificateurs-de-la-fonction-calculate">Modificateurs de la fonction CALCULATE<a class="hash-link" href="#modificateurs-de-la-fonction-calculate" title="Direct link to heading">​</a></h2><p>La fonction CALCULATE accepte deux types d&#x27;arguments : Filtres et Modificateurs.
Ces derniers se comportent de différentes manières et ils affectent le contexte d&#x27;évaluation final généré par CALCULATE.</p><p>Un modificateur change le comportement de CALCULATE , par exemple la fonction ALL, ALLSELECTED, ALLNOBLANKROW , en fait toute fonction commence par ALL est utilisé dans CALCULATE comme un modificateur, et il existe aussi les modificateurs CROSSFILTER et USERLATIONSHIP et qui ne sont pas des filtres.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="userelationship">USERELATIONSHIP<a class="hash-link" href="#userelationship" title="Direct link to heading">​</a></h2><p><strong>USERELATIONSHIP</strong> est un modificateur <strong>CALCULATE</strong> qui demande à la fonction CALCULATE d&#x27;activer temporairement la relation. Lorsque <strong>CALCULATE</strong> a calculé son résultat, la relation par défaut redevient active.
Si deux tables sont liées par plusieurs relations, vous pouvez décider quelle relation activée à l&#x27;aide de la fonction <strong>USERELATIONSHIP</strong> .
En effet, vous ne pouvez avoir qu&#x27;une seule relation active entre deux tables. Par exemple, vous commencez avec un modèle où les <em>ventes</em> sont liées à la <em>date</em> via la colonne <em>Date</em> , comme dans l&#x27;image suivante.</p><p><img loading="lazy" alt="DA-Contextes-évaluation-avancés-1" src="/assets/images/DA-Contextes-evaluation-avances-1-2a6c12755601738bde486ba842cacca4.png" width="1359" height="563" class="img_E7b_"></p><p>Si vous créez une deuxième relation, basée sur les colonnes <em>Date de livraison</em> , la deuxième relation est une relation inactive.</p><p><img loading="lazy" alt="DA-Contextes-évaluation-avancés-2" src="/assets/images/DA-Contextes-evaluation-avances-2-dcca1734415a52b5f0b81784d4dfba2b.png" width="1359" height="564" class="img_E7b_"></p><p>Les relations inactives sont de nature non-actives. Par conséquent, si vous filtrez par <em>année,</em> le rapport affiche les ventes dont la <em>date de commande</em> appartient à l&#x27;année filtrée. <em>La date de livraison</em> n&#x27;est pas utilisée dans le cadre du filtrage par défaut. Afin de filtrer les <em>ventes en</em> fonction de la <em>date de livraison</em> , vous pouvez activer temporairement une relation en utilisant la fonction <strong>USERELATIONSHIP</strong> .</p><p>La mesure <em>Montant de la livraison</em> ci-dessous calcule le montant livré dans un certain délai, contrairement au montant commandé retourné par la mesure <em>Montant des ventes</em> :</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Delivery Amount </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            CALCULATE </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Sales Amount</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        USERELATIONSHIP </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> Sales </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> Delivery </span><span class="token keyword" style="color:#00009f">Date</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">Date</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">Date</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Vous pouvez comparer le <em>montant de la livraison</em> avec le <em>montant</em> des <em>ventes</em> dans la figure suivante :</p><p><img loading="lazy" alt="DA-Contextes-évaluation-avancés-3" src="/assets/images/DA-Contextes-evaluation-avances-3-3995fe469748825553e2c0d61d19eded.png" width="765" height="702" class="img_E7b_"></p><p>Les arguments de <strong>USERELATIONSHIP</strong> sont les deux colonnes qui forment la relation. L&#x27;ordre des colonnes n&#x27;est pas pertinent, même s&#x27;il est courant d&#x27;utiliser la colonne du côté multiple de la relation ( <em>Sales</em> dans notre exemple) en premier, et le côté un ( <em>Date</em> dans l&#x27;exemple) en second. Cela dit, c&#x27;est juste une convention standard; l&#x27;ordre inverse ne modifie pas le résultat.</p><blockquote><p>La relation doit déjà être dans le modèle. Vous ne pouvez pas utiliser <strong>USERELATIONSHIP</strong> pour créer une relation aléatoire. <strong>USERELATIONSHIP</strong> ne peut activer qu&#x27;une relation existante.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="crossfilter">CROSSFILTER<a class="hash-link" href="#crossfilter" title="Direct link to heading">​</a></h2><p>La fonction <strong>CROSSFILTER</strong> est un modificateur CALCULATE, elle vous permet de changer la propagation du filtre croisé d&#x27;une relation .
Elle comporte trois arguments, la colonne de gauche d&#x27;une relation, la colonne droite d&#x27;une relation et le type de filtre croisé, ce dernier contient différents types soit on l&#x27;écrit en chiffre soit la description du chiffre :</p><blockquote><p>0 pour <strong>None</strong>,  1 pour <strong>OneWay</strong>,  2 pour <strong>Both</strong>, 3 pour <strong>OneWay_RightFiltersLeft</strong>, 4 pour <strong>OneWay_LeftFiltersRight</strong>. </p></blockquote><p>Les arguments <strong>OneWay_RightFiltersLeft</strong> et <strong>OneWay_LeftFiltersRight</strong> peuvent être utilisés dans les types de relation plusieurs-à-plusieurs et un-à-plusieurs, mais pas dans le type de relation un-à-un.
Lorsque le type de filtre croisé <strong>OneWay_RightFiltersLeft</strong> ou <strong>OneWay_LeftFiltersRight</strong> est utilisé dans un type de relation un-à-plusieurs, il doit être cohérent avec la seule propagation de filtre autorisée, qui est un-à-plusieurs. Si le sens demandé est l&#x27;inverse, <strong>CROSSFILTER</strong> renvoie une erreur.</p><p>Voyons ça dans le code suivant :</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Num </span><span class="token keyword" style="color:#00009f">Of</span><span class="token plain"> Customers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                CALCULATE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            DISTINCTCOUNT </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> Customers </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> Customer Name</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            CROSSFILTER </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        SAles </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> CustomerKey</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        Customer </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> CustomerKey</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        BOTH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>La mesure nombre de clients va calculer le nombre distinct des noms des clients, en utilisant le filtre croisé bidirectionnel entre la clé de client qui se trouve dans la table des ventes et celle qui se trouve dans la table des clients .</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="transition-de-contexte">Transition de contexte<a class="hash-link" href="#transition-de-contexte" title="Direct link to heading">​</a></h2><p>La transition du contexte est le seul point où le contexte de ligne et le contexte de filtre se croise ou se rencontre.
La formule suivante effectue une itération sur la table des ventes et calcule la somme de la quantité. </p><p><img loading="lazy" alt="DA-Contextes-évaluation-avancés-4" src="/assets/images/DA-Contextes-evaluation-avances-4-4b900f363519cf08a70fd99b572b9d10.png" width="968" height="460" class="img_E7b_"></p><p>Dans l&#x27;image au-dessus, on rassemble le contexte de ligne qui est l&#x27;itération de SUMX sur la table des ventes donc ligne par ligne et le filtre qui va se faire à l&#x27;ai de du CALCULATE pour calculer la somme de la quantité.</p><blockquote><p>Il faut éviter la transition de contexte lors d&#x27;une itération sur une table qui contient des doublons car le résultat sera erroné.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="dépendance-circulaire">Dépendance circulaire<a class="hash-link" href="#dépendance-circulaire" title="Direct link to heading">​</a></h2><p>La transition de contexte est une dépendance circulaire.
Les objets calculés se réfèrent souvent les uns aux autres. Par exemple, vous créez trois colonnes calculées dans <em>Sales</em> pour calculer <em>Line Amount</em> , <em>Line Cost</em> et <em>Line Margin</em> :</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Line Amount </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Sales</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Quantity</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> Sales</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Net Price</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Line Cost </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Sales</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Quantity</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> Sales</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Unit Cost</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Line Margin </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Sales</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Line Amount</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> Sales</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Line Cost</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><em>Le montant de la ligne</em> et le <em>coût de la ligne</em> sont calculés en fonction des colonnes déjà présentes dans le tableau.
<em>La marge de ligne</em> nécessite les valeurs de <em>Montant de</em> <em>ligne</em> et de <em>Coût de ligne</em> afin de produire un résultat.
Par conséquent, DAX sait qu&#x27;il doit calculer le <em>montant de la</em> <em>ligne</em> et le <em>coût de la ligne</em> avant de calculer la <em>marge de la ligne</em>.
Avec trois colonnes, il est assez facile de suivre les dépendances mais dans un modèle réel avec de nombreuses colonnes, les dépendances sont beaucoup plus complexes à suivre. Cela dit, le moteur DAX garde une trace de quelle entité dépend de laquelle. Il utilise un diagramme de dépendances pour construire un plan d&#x27;exécution où chaque entité est calculée après tous les objets dont dépend l&#x27;entité d&#x27;origine. </p><blockquote><p>Vous pouvez obtenir une dépendance circulaire dans deux scénarios principaux :</p><ul><li>Lors de la création d&#x27;une colonne calculée qui semble parfaitement légitime et qui utilise <strong>CALCULATE</strong> ;</li><li>Lorsque vous essayez de créer une relation entre deux tables, dont l&#x27;une est une table calculée, ou lorsque la relation est basée sur une colonne calculée.</li></ul></blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="lordre-dexécution-dans-calculate">L&#x27;ordre d&#x27;exécution dans CALCULATE<a class="hash-link" href="#lordre-dexécution-dans-calculate" title="Direct link to heading">​</a></h2><p>Pour bien comprendre l&#x27;ordre, prenons le code suivant :</p><p><img loading="lazy" alt="DA-Contextes-évaluation-avancés-5" src="/assets/images/DA-Contextes-evaluation-avances-5-b16843bf75b345f634d4c242625f501e.png" width="415" height="223" class="img_E7b_"></p><p>Vous avez la fonction CALCULATE le montant des ventes avec le filtre qui déclare l&#x27;année civile livré égale à 2007 et un modificateur USERELATIONSHIP qui change la relation active.
L&#x27;ordre de l&#x27;exécution sera le suivant : Après le modificateur USERELATIONSHIP terminera son travail ,le filtre sera appliqué sur le résultat du modificateur et à la fin CALCULATE s&#x27;exécutera.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/80-Formation PBI/801300/801300_Format_Dax_DA-Contextes-évaluation-avancés.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/Formation PBI/801300/Format_Dax_Calcul-DAX"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Format_Dax_Calcul-DAX</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/Formation PBI/801300/Format_Dax_DA-Evaluation-contextes"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Format_Dax_DA-Evaluation-contextes</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#modificateurs-de-la-fonction-calculate" class="table-of-contents__link toc-highlight">Modificateurs de la fonction CALCULATE</a></li><li><a href="#userelationship" class="table-of-contents__link toc-highlight">USERELATIONSHIP</a></li><li><a href="#crossfilter" class="table-of-contents__link toc-highlight">CROSSFILTER</a></li><li><a href="#transition-de-contexte" class="table-of-contents__link toc-highlight">Transition de contexte</a></li><li><a href="#dépendance-circulaire" class="table-of-contents__link toc-highlight">Dépendance circulaire</a></li><li><a href="#lordre-dexécution-dans-calculate" class="table-of-contents__link toc-highlight">L&#39;ordre d&#39;exécution dans CALCULATE</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Lien web</div><ul class="footer__items"><li class="footer__item"><a href="https://docusaurus.io/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docusaurus doc<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a3d3d1d7.js"></script>
<script src="/assets/js/main.0e780d71.js"></script>
</body>
</html>